<div class="card">
  <div class="card-header">
    Edit Workshop
  </div>
  <div class="card-body">
    <form #workshopForm="ngForm" (ngSubmit)="onSubmit(workshopForm)">

      <div class="form-group">
        <label for="name">Workshop Name</label>
        <input type="text" class="form-control" name="name" #workshopName="ngModel" [ngClass]="{'is-invalid':workshopName.errors && workshopName.touched}"
          [(ngModel)]="workshop.name" minlength="2" required>
        <div [hidden]="!workshopName.errors?.required" class="invalid-feedback">
          Workshop Name Required
        </div>
        <div [hidden]="!workshopName.errors?.minlength" class="invalid-feedback">
          Must be at least 2 characters
        </div>
      </div>

      <!-- <div class="form-group">
        <label for="presenter">Presenter</label>
        <input type="text" class="form-control" name="presenter" #workshopPresenter="ngModel" [ngClass]="{'is-invalid':workshopPresenter.errors && workshopPresenter.touched}"
          [(ngModel)]="workshop.presenter" minlength="2" required>
        <div [hidden]="!workshopPresenter.errors?.required" class="invalid-feedback">
          Presenter Required
        </div>
        <div [hidden]="!workshopPresenter.errors?.minlength" class="invalid-feedback">
          Must be at least 2 characters
        </div>
      </div> -->

      <!-- <div class="form-group">
        <label for="presenter">Presenter</label>
        <select type="text" class="form-control" name="presenter" #workshopPresenter="ngModel" 
          [(ngModel)]="workshop.presenter" required>
        <option *ngFor="let presenter of presenters" [ngValue]="presenter">{{ presenter.name }}</option>
        </select>
      </div> -->

      <div class="form-group">
        <label for="presenter1">Primary Presenter</label>
        <a routerLink="/presenters/add">Add Presenter</a>
        <select type="text" class="form-control" name="presenter1" #workshopPresenter="ngModel" [(ngModel)]="workshop.presenter1"
          required>
          <option *ngFor="let presenter of presenters" [ngValue]="presenter.id">{{ presenter.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="presenter2">Assistant Presenter</label>
        <a routerLink="/presenters/add">Add Presenter</a>
        <select type="text" class="form-control" name="presenter2" #workshopPresenter="ngModel" [(ngModel)]="workshop.presenter2">
          <option *ngFor="let presenter of presenters" [ngValue]="presenter.id">{{ presenter.name }}</option>
        </select>
      </div>

      <!-- <div class="form-group">
          <label for="presenter">Presenter</label>
          <input type="text" class="form-control" name="presenter" #clientEmail="ngModel" [ngClass]="{'is-invalid':clientEmail.errors && clientEmail.touched}"
            [(ngModel)]="workshop.email" required pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$">
          <div [hidden]="!clientEmail.errors?.required" class="invalid-feedback">
            Email Required
          </div>
          <div [hidden]="!clientEmail.errors?.pattern" class="invalid-feedback">
            Email is not valid.
          </div>
        </div> -->

      <div class="form-group">
        <label for="description">Workshop Description</label>
        <input type="text" class="form-control" [ngClass]="{'is-invalid':workshopDescription.errors && workshopDescription.touched}"
          [(ngModel)]="workshop.description" name="description" #workshopDescription="ngModel" minlength="10" required>
        <div [hidden]="!workshopDescription.errors?.required" class="invalid-feedback">
          Description is required
        </div>
        <div [hidden]="!workshopDescription.errors?.minlength" class="invalid-feedback">
          Description must be at least 10 characters
        </div>
      </div>

      <div class="form-group">
        <label for="room">Workshop Room</label>
        <input type="text" class="form-control" [ngClass]="{'is-invalid':workshopRoom.errors && workshopRoom.touched}" [(ngModel)]="workshop.room"
          name="room" #workshopRoom="ngModel" minlength="3" required>
        <div [hidden]="!workshopRoom.errors?.required" class="invalid-feedback">
          Room is required
        </div>
        <div [hidden]="!workshopRoom.errors?.minlength" class="invalid-feedback">
          Room must be at least 3 characters
        </div>
      </div>

      <div class="form-group">
        <label for="imageURL">Workshop Image</label>
        <input type="string" class="form-control" [(ngModel)]="workshop.imageURL" name="imageURL" #workshopimageURL="ngModel">
      </div>

      <div class="dropzone" dropZone (hovered)="toggleHover($event)" (dropped)="startUpload($event)" [class.hovering]="isHovering">
        <div class="file">
          <label class="file-label">
            <input class="file-input" type="file" (change)="startUpload($event.target.files)">
          </label>
        </div>
      </div>
      
      <div *ngIf="percentage | async as pct">
      
        <progress class="progress is-info" [value]="pct" max="100">
        </progress>
        <!-- <p>{{ pct | number }}%</p> -->
      </div>

      <div *ngIf="snapshot | async as snap">
        <p *ngIf="!isActive(snap) && downloadURL">Upload Complete</p>
      </div>
      

      <!-- <div class="form-group">
        <label for="totalSeats">Total Seats</label>
        <input type="number" class="form-control" [(ngModel)]="workshop.totalSeats" name="totalSeats" #workshopTotalSeats="ngModel">
      </div> -->

      <div>
        <div class="form-group">
          <div class="row registered">
            <label for="totalSeats1">Session 1 Total Seats</label>
            <p class="ml-auto">Registered Students: {{ workshop.session1.registered.length }}</p>
          </div>
          
          <input type="number" class="form-control" [(ngModel)]="workshop.session1.totalSeats" name="totalSeats1">
        </div>
      </div>
      
      <div>
        <div class="form-group">
          <div class="row registered">
            <label for="totalSeats2">Session 2 Total Seats</label>
            <p class="ml-auto">Registered Students: {{ workshop.session2.registered.length }}</p>
          </div>
          <input type="number" class="form-control" [(ngModel)]="workshop.session2.totalSeats" name="totalSeats2">
        </div>
      </div>
      
      <div>
        <div class="form-group">
          <div class="row registered">
            <label for="totalSeats3">Session 3 Total Seats</label>
            <p class="ml-auto">Registered Students: {{ workshop.session3.registered.length }}</p>
          </div>
          <input type="number" class="form-control" [(ngModel)]="workshop.session3.totalSeats" name="totalSeats3">
        </div>
      </div>

      <input type="submit" value="Submit Edit" class="btn btn-primary btn-block">
      <button (click)="onDeleteClick(workshop)" class="btn btn-block btn-danger">Delete Workshop</button>
    </form>
  </div>
</div>


<!-- <div class="row">
  <div class="preview text-center">
    <h2>Edit Preview</h2>
  </div>
  <div class="card-deck">
    <div class="card">
      <img class="img-fluid" src="{{ workshop.imageURL }}" alt="{{ workshop.name + ' image' }}">
      <div class="card-body">
        <h3 class="card-text">{{ workshop.name }}</h3>
        <p class="card-text">{{ workshop.presenter.name }}</p>
        <p class="card-text">{{ workshop.presenter.id }}</p>
        <p class="card-text">
          {{ (workshop.description.length > 200)? (workshop.description | slice:0:200) + '...':(workshop.description) }}
        </p>
      </div>
      <div class="card-footer">
        <div class="row">
          <p class="class-muted mr-auto details">Workshop Details</p>
          <p class="text-muted ml-auto available">Available Seats: {{ workshop.availableSeats }}</p>
        </div>
        <a *ngIf="admin" routerLink="/editworkshop/{{ workshop.id }}">Edit Workshops</a>
      </div>
    </div>
  </div>
</div> -->


<!-- <div *ngIf="snapshot | async as snap">
  {{ snap.bytesTransferred }} of {{ snap.totalBytes }}

  <div *ngIf="downloadURL | async as url">
    <h3>Results!</h3>
    <img [src]="url">
    <br>
    <a [href]="url" target="_blank" rel="noopener">Download Me!</a>
  </div>

  <button (click)="task.pause()" class="button is-warning" [disabled]="!isActive(snap)">Pause</button>
  <button (click)="task.cancel()" class="button is-danger" [disabled]="!isActive(snap)">Cancel</button>
  <button (click)="task.resume()" class="button is-info" [disabled]="!(snap?.state === 'paused')">Resume</button>

</div> -->